<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Facilitator Panel | goCBT</title>
    <link rel="stylesheet" href="auth-style.css">
</head>
<body>
    <div class="auth-wrapper">
        <div class="auth-card" style="max-width: 800px; width: 95%;">
            <div class="auth-header">
                <div class="logo">goCBT Admin</div>
                <h1 id="facNameDisplay">Facilitator Console</h1>
                <p>Academic Session Audit Trail</p>
            </div>

            <div class="analytics-section" style="margin: 20px 0; padding: 15px; background: rgba(255,255,255,0.05); border-radius: 8px; text-align: left;">
                <h3 style="font-size: 0.9rem; margin-bottom: 15px; color: #00d4ff;">Departmental Activity</h3>
                <div id="analyticsBars">
                    <div style="margin-bottom: 10px;">
                        <div style="display: flex; justify-content: space-between; font-size: 0.7rem; margin-bottom: 3px;">
                            <span>Computer Science</span><span id="valCS">0%</span>
                        </div>
                        <div style="background: #333; height: 8px; border-radius: 4px;"><div id="barCS" style="background: #00d4ff; width: 0%; height: 100%; border-radius: 4px; transition: 0.8s;"></div></div>
                    </div>
                    <div style="margin-bottom: 10px;">
                        <div style="display: flex; justify-content: space-between; font-size: 0.7rem; margin-bottom: 3px;">
                            <span>Engineering</span><span id="valENG">0%</span>
                        </div>
                        <div style="background: #333; height: 8px; border-radius: 4px;"><div id="barENG" style="background: #2ecc71; width: 0%; height: 100%; border-radius: 4px; transition: 0.8s;"></div></div>
                    </div>
                </div>
            </div>

            <div style="display: flex; gap: 10px; margin-bottom: 15px;">
                <input type="text" id="studentSearch" onkeyup="filterStudents()" placeholder="Search Reg Number..." style="flex: 2; padding: 10px; background: rgba(0,0,0,0.3); border: 1px solid #444; color: white; border-radius: 5px;">
                <button onclick="exportToCSV()" style="flex: 1; background: #2ecc71; border: none; border-radius: 5px; cursor: pointer; font-weight: bold;">ðŸ“Š Export CSV</button>
            </div>

            <div style="overflow-x: auto;">
                <table class="admin-table" style="width: 100%; border-collapse: collapse; font-size: 0.85rem;">
                    <thead>
                        <tr style="border-bottom: 2px solid #444; color: #00d4ff; text-align: left;">
                            <th style="padding: 10px;">Reg Number</th>
                            <th style="padding: 10px;">Logins</th>
                            <th style="padding: 10px;">Last Activity</th>
                        </tr>
                    </thead>
                    <tbody id="adminData"></tbody>
                </table>
            </div>

            <div style="margin-top: 25px; display: flex; gap: 10px;">
                <button class="btn-login" style="background: #ff4d4d;" onclick="clearSystemData()">Reset All Data</button>
                <button class="btn-login" style="background: #555;" onclick="location.href='index.html'">Logout</button>
            </div>
        </div>
    </div>
    <script src="auth-script.js"></script>
    <script>
        // Run audit on load
        window.onload = function() {
            renderAuditTable();
            updateAnalytics();
        };
    </script>
</body>
</html>
